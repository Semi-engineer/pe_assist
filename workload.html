<!DOCTYPE html>
<html lang="th">
<head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Workload Calculator</title>
<link rel="stylesheet" href="css/style.css"><script src="https://cdn.tailwindcss.com"></script></head>
<body class="bg-slate-50">
<header class="bg-white shadow p-4"><div class="container mx-auto"><a href="index.html" class="text-sky-600">← กลับ</a></div></header>
<main class="container mx-auto p-4"><div id="workload-root"></div></main>

<script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<script type="text/babel">
  function Workload() {
    const [standardTime, setStandardTime] = React.useState(120);
    const [batchQty, setBatchQty] = React.useState(50);
    const [actualTime, setActualTime] = React.useState(6000);

    const outputPerHour = React.useMemo(()=> standardTime>0 ? 3600 / standardTime : 0, [standardTime]);
    const totalBatch = React.useMemo(()=> standardTime * batchQty, [standardTime, batchQty]);
    const efficiency = React.useMemo(()=> actualTime>0 ? (totalBatch / actualTime)*100 : 0, [totalBatch, actualTime]);

    const clamp = ()=> {
      if(standardTime<=0) setStandardTime(1);
      if(batchQty<1) setBatchQty(1);
      if(actualTime<=0) setActualTime(1);
    };

    return (
      <div className="bg-white rounded-2xl shadow-lg p-6 max-w-2xl mx-auto">
        <h2 className="text-2xl font-semibold mb-3">Workload / Output per Hour</h2>
        <div className="space-y-3">
          <label className="block text-sm">Standard Time (sec)</label>
          <input className="w-full p-2 border rounded" type="number" value={standardTime} onChange={e=>setStandardTime(parseFloat(e.target.value||0))} onBlur={clamp} />
          <label className="block text-sm">Batch Quantity</label>
          <input className="w-full p-2 border rounded" type="number" value={batchQty} onChange={e=>setBatchQty(parseInt(e.target.value||0))} onBlur={clamp} />
          <label className="block text-sm">Actual Time Taken (sec)</label>
          <input className="w-full p-2 border rounded" type="number" value={actualTime} onChange={e=>setActualTime(parseFloat(e.target.value||0))} onBlur={clamp} />
          <div className="flex gap-2">
            <button onClick={clamp} className="px-4 py-2 bg-emerald-600 text-white rounded">คำนวณ</button>
            <button onClick={()=>{setStandardTime(120); setBatchQty(50); setActualTime(6000);}} className="px-4 py-2 bg-slate-200 rounded">รีเซ็ต</button>
          </div>
        </div>

        <div className="mt-4 grid grid-cols-1 gap-3">
          <div className="p-3 bg-slate-50 rounded">
            <div className="text-xs text-slate-500">Output per Hour</div>
            <div className="text-lg font-semibold">{outputPerHour.toFixed(2)} ชิ้น/ชั่วโมง</div>
          </div>
          <div className="p-3 bg-slate-50 rounded">
            <div className="text-xs text-slate-500">Total Batch Time</div>
            <div className="text-lg font-semibold">{totalBatch} วินาที</div>
          </div>
          <div className="p-3 bg-slate-50 rounded">
            <div className="text-xs text-slate-500">Efficiency</div>
            <div className="text-lg font-semibold">{efficiency.toFixed(2)} %</div>
          </div>
        </div>
      </div>
    );
  }

  ReactDOM.createRoot(document.getElementById('workload-root')).render(<Workload />);
</script>
</body>
</html>
