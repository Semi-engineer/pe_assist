<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PE Ops Studio • Schedule (No-ChartJS)</title>
  <meta name="description" content="ตารางแผนงาน Production Schedule พร้อม Gantt Chart (SVG) และระบบ import/export CSV" />
  <link rel="icon" type="image/svg+xml" href="./assets/favicon.svg" />
  <link rel="stylesheet" href="./assets/styles.css" />
  <script defer src="./assets/js/schedule.js"></script>
  <script defer src="./assets/main.js"></script>
</head>
<body>
  <div id="site-header"></div>

  <main class="container section">
    <h1>Schedule</h1>
    <p class="lead">ตารางแผนงาน (LocalStorage + CSV import/export) พร้อม <b>Gantt Chart (SVG custom, no Chart.js)</b></p>

    <div class="card">
      <div class="grid grid-4">
        <div>
          <label class="label" for="task">งาน</label>
          <input id="task" class="input" placeholder="เช่น Setup MC #1 / Changeover" />
        </div>
        <div>
          <label class="label" for="start">วันเริ่ม</label>
          <input id="start" class="input" type="date" />
        </div>
        <div>
          <label class="label" for="end">วันสิ้นสุด</label>
          <input id="end" class="input" type="date" />
        </div>
        <div>
          <label class="label" for="status">สถานะ</label>
          <select id="status" class="select">
            <option value="Pending">Pending</option>
            <option value="WIP">WIP</option>
            <option value="Done">Done</option>
          </select>
        </div>
      </div>

      <div class="section mt-3">
        <button class="btn" id="add">เพิ่ม</button>
        <button class="btn secondary" id="clear">ล้างทั้งหมด</button>
        <button class="btn secondary" id="export">Export CSV</button>
        <label class="btn secondary" for="import-file">Import CSV</label>
        <input id="import-file" type="file" accept=".csv" style="display:none" />
      </div>

      <div class="mt-3">
        <label class="label" for="filter">ค้นหา</label>
        <input id="filter" class="input" placeholder="พิมพ์คำค้นหา" />
      </div>

      <table class="table mt-4" id="tbl">
        <thead><tr><th>งาน</th><th>เริ่ม</th><th>สิ้นสุด</th><th>สถานะ</th><th></th></tr></thead>
        <tbody></tbody>
      </table>

      <h2 class="section mt-4">Gantt Chart (SVG)</h2>
      <div id="ganttWrap">
        <svg id="ganttSvg"></svg>
        <div id="tooltip"></div>
      </div>
    </div>
    <section class="section mt-4">
      <h2>หมายเหตุ</h2>
      <ul>
        <li>ข้อมูลจะถูกเก็บใน LocalStorage ของเบราว์เซอร์ (ถ้าล้าง cache ข้อมูลจะหาย)</li>
        <li>วันที่เริ่มต้นและสิ้นสุด จะต้องอยู่ในปีเดียวกัน (เช่น 2024-01-01 ถึง 2024-12-31)</li>
        <li>ไฟล์ CSV ที่ import จะต้องมีหัวคอลัมน์เหมือนกับที่ export ออกมา (Task,Start,End,Status)</li>
        <li>ถ้า import ไฟล์ที่มีข้อมูลซ้ำกับในตาราง จะเป็นการเพิ่มข้อมูลใหม่ ไม่ใช่การแก้ไขข้อมูลเดิม</li>
        <li>ถ้าต้องการแก้ไขข้อมูล ให้ลบรายการนั้นออก แล้วเพิ่มใหม่อีกครั้ง</li>
      </ul>    
    </section>
  </main>
  <div id="site-footer"></div>
</body>
</html>
