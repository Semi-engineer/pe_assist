<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PE Ops Studio • Schedule (No-ChartJS)</title>
  <meta name="description" content="ตารางแผนงาน Production Schedule พร้อม Gantt Chart (SVG) และระบบ import/export CSV" />
  <link rel="stylesheet" href="./assets/styles.css" />
</head>
<body>
  <div id="site-header"></div>

  <main class="container section">
    <h1>Schedule</h1>
    <p class="lead">ตารางแผนงาน (LocalStorage + CSV import/export) พร้อม <b>Gantt Chart (SVG custom, no Chart.js)</b></p>

    <div class="card">
      <!-- ฟอร์ม -->
      <div class="grid grid-4">
        <div>
          <label class="label" for="task">งาน</label>
          <input id="task" class="input" placeholder="เช่น Setup MC #1 / Changeover" />
        </div>
        <div>
          <label class="label" for="start">วันเริ่ม</label>
          <input id="start" class="input" type="date" />
        </div>
        <div>
          <label class="label" for="end">วันสิ้นสุด</label>
          <input id="end" class="input" type="date" />
        </div>
        <div>
          <label class="label" for="status">สถานะ</label>
          <select id="status" class="select">
            <option value="Pending">Pending</option>
            <option value="WIP">WIP</option>
            <option value="Done">Done</option>
          </select>
        </div>
      </div>

      <div class="mt-3">
        <button class="btn" id="add">เพิ่ม</button>
        <button class="btn secondary" id="clear">ล้างทั้งหมด</button>
        <button class="btn secondary" id="export">Export CSV</button>
        <label class="btn secondary" for="import-file">Import CSV</label>
        <input id="import-file" type="file" accept=".csv" style="display:none" />
      </div>

      <div class="mt-3">
        <label class="label" for="filter">ค้นหา</label>
        <input id="filter" class="input" placeholder="พิมพ์คำค้นหา" />
      </div>

      <table class="table mt-4" id="tbl">
        <thead><tr><th>งาน</th><th>เริ่ม</th><th>สิ้นสุด</th><th>สถานะ</th><th></th></tr></thead>
        <tbody></tbody>
      </table>

      <h2 class="mt-4">Gantt Chart (SVG)</h2>
      <div id="ganttWrap">
        <svg id="ganttSvg"></svg>
        <div id="tooltip"></div>
      </div>
    </div>
  <script defer src="./assets/main.js"></script>
  <div id="site-footer"></div>

  <script>
    const repo = "pe-ops-studio-dark-tech-dashboard-v3";
    const base = window.location.pathname.includes(`/${repo}/`) ? `/${repo}/` : "/";

    fetch(base + "partials/header.html")
      .then(response => response.text())
      .then(data => {
        document.getElementById("site-header").innerHTML = data;
      });

    fetch(base + "partials/footer.html")
      .then(response => response.text())
      .then(data => {
        document.getElementById("site-footer").innerHTML = data;
      });
  </script>
</body>
</html>
